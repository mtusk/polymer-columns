<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">

<dom-module id="miller-columns">
  <template>
    <style>
      :host {
        overflow-x: auto;
      }

      #selector {
        display: -webkit-box;
        display: -moz-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        flex-flow:row;
        height: 100%;
      }
    </style>

    <iron-selector
      id="selector"
      selected="{{selected}}"
      on-iron-items-changed="selectorItemsChanged">
      <template
        is="dom-repeat"
        items="{{columns}}"
        as="column"
        index-as="columnIndex">
        <miller-column
          items="{{column.items}}"
          column-id="{{columnIndex}}"
          on-move-left-right="moveLeftRight">
        </miller-column>
      </template>
    </iron-selector>

  </template>

  <script>
    Polymer({
      is: 'miller-columns',

      properties: {
        columns: Array,
        selected: Number
      },

      moveLeftRight: function(event, details, sender) {
        if (details.direction === 'Left') {
          this.$.selector.selectPrevious();
        } else {
          this.$.selector.selectNext();
        }

        this.$.selector.selectedItem.focus();
      },

      selectorItemsChanged: function() {
        this.$.selector.select(0);
        this.$.selector.selectedItem.focus();
      }
    });
  </script>
</dom-module>
